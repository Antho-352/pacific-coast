---
deployment:
  tasks:
    # DÃ©finition des variables
    - export DEPLOYPATH=/home/hondapacificcoas/public_html/
    - export REPO_PATH=/home/hondapacificcoas/repositories/pacific-coast/
    
    # Log de dÃ©but
    - echo "[$(date)] ðŸš€ DÃ©marrage du dÃ©ploiement automatique" >> /home/hondapacificcoas/deploy.log
    
    # Installation des dÃ©pendances
    - cd $REPO_PATH && /opt/cpanel/ea-nodejs20/bin/npm install >> /home/hondapacificcoas/deploy.log 2>&1
    
    # Build
    - cd $REPO_PATH && /opt/cpanel/ea-nodejs20/bin/npm run build >> /home/hondapacificcoas/deploy.log 2>&1
    
    # DÃ©ploiement (avec suppression des anciens fichiers pour Ã©viter les conflits)
    - /bin/rm -rf $DEPLOYPATH/*
    - /bin/cp -R $REPO_PATH/dist/* $DEPLOYPATH/
    
    # Log de fin
    - echo "[$(date)] âœ… DÃ©ploiement terminÃ©" >> /home/hondapacificcoas/deploy.log
