---
/**
 * Quiz Section - PC800.fr
 * Mise en valeur premium, pr√©sentation √©ditoriale
 */

const quizThemes = [
  {
    id: 'motoVsAuto',
    title: 'Moto vs Auto',
    description: 'Comprendre ce qui change vraiment : comportement, freinage, risques, r√©flexes.',
    level: 'Accessible',
    category: 'S√©curit√©',
    questions: 15,
    duration: '5 min',
    available: true
  },
  {
    id: 'racing',
    title: 'Histoire du Racing',
    description: 'L√©gendes, records, et moments qui ont construit la culture moto.',
    level: 'Interm√©diaire',
    category: 'Culture',
    questions: 15,
    duration: '5 min',
    available: true
  },
  {
    id: 'pc800',
    title: 'Sp√©cial PC800',
    description: 'Tout savoir sur la Pacific Coast : specs, histoire, entretien.',
    level: 'Passionn√©',
    category: 'PC800',
    questions: 15,
    duration: '5 min',
    available: false
  },
  {
    id: 'touring',
    title: 'M√©canique Touring',
    description: 'Entretien, pr√©paration voyage, accessoires pour la route.',
    level: 'Interm√©diaire',
    category: 'Entretien',
    questions: 15,
    duration: '5 min',
    available: false
  }
];
---

<section id="quiz" class="section bg-white">
  <div class="container">
    <!-- Header √©ditorial -->
    <div class="section-header text-center">
      <span class="section-header__label">Quiz</span>
      <h2 class="section-header__title mx-auto">Testez votre culture PC800 & touring</h2>
      <p class="section-header__intro mx-auto">
        15 questions par th√®me, rapides et fun. Parfait pour apprendre, r√©viser, ou d√©fier un ami avant une sortie.
      </p>
    </div>

    <!-- Grille des th√®mes -->
    <div class="grid md:grid-cols-2 gap-6 max-w-4xl mx-auto" id="quiz-selection">
      {quizThemes.map((theme) => (
        <div class={`card relative ${!theme.available ? 'opacity-60' : ''}`}>
          {!theme.available && (
            <div class="absolute top-4 right-4">
              <span class="badge badge--metal">Bient√¥t</span>
            </div>
          )}
          
          <div class="flex items-start justify-between mb-4">
            <div>
              <span class="badge badge--red mb-2">{theme.category}</span>
              <h3 class="text-xl font-bold text-gray-900">{theme.title}</h3>
            </div>
          </div>
          
          <p class="text-gray-600 mb-6">{theme.description}</p>
          
          <div class="flex items-center gap-4 text-sm text-gray-500 mb-6">
            <span class="flex items-center gap-1">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              {theme.questions} questions
            </span>
            <span class="flex items-center gap-1">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
              {theme.duration}
            </span>
            <span class="flex items-center gap-1">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z" />
              </svg>
              {theme.level}
            </span>
          </div>
          
          {theme.available ? (
            <button 
              onclick={`startQuiz('${theme.id}')`}
              class="btn btn--primary w-full"
            >
              Commencer
            </button>
          ) : (
            <button 
              disabled
              class="btn btn--secondary w-full opacity-50 cursor-not-allowed"
            >
              Bient√¥t disponible
            </button>
          )}
        </div>
      ))}
    </div>

    <!-- Container du quiz (cach√© initialement) -->
    <div id="quiz-container" class="hidden max-w-2xl mx-auto">
      <div class="card card--feature">
        <!-- Progress -->
        <div class="mb-6">
          <div class="flex items-center justify-between text-sm text-gray-500 mb-2">
            <span>Question <span id="current-question">1</span>/15</span>
            <span id="current-score">Score: 0</span>
          </div>
          <div class="h-2 bg-gray-200 rounded-full overflow-hidden">
            <div id="progress-bar" class="h-full bg-red-700 transition-all duration-300" style="width: 6.66%"></div>
          </div>
        </div>

        <!-- Question -->
        <div id="question-container" class="mb-6">
          <h4 id="question-text" class="text-xl font-semibold text-gray-900 mb-4"></h4>
          <div id="answers-container" class="space-y-3"></div>
        </div>

        <!-- Feedback -->
        <div id="feedback-container" class="hidden mb-4">
          <div id="feedback-box" class="rounded-lg p-4">
            <div class="flex items-start gap-3">
              <div id="feedback-icon" class="flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center"></div>
              <div>
                <p id="feedback-title" class="font-semibold"></p>
                <p id="feedback-text" class="text-sm mt-1"></p>
              </div>
            </div>
          </div>
        </div>

        <!-- Navigation -->
        <div id="quiz-navigation" class="flex justify-end">
          <button id="next-btn" onclick="nextQuestion()" class="hidden btn btn--primary">
            Suivant
          </button>
        </div>
      </div>
    </div>

    <!-- R√©sultats (cach√© initialement) -->
    <div id="results-container" class="hidden max-w-2xl mx-auto text-center">
      <div class="card card--feature">
        <div id="result-icon" class="w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center text-4xl bg-gray-100"></div>
        <h4 id="result-title" class="text-2xl font-bold text-gray-900 mb-2"></h4>
        <p id="result-score" class="text-4xl font-bold text-red-700 mb-2"></p>
        <p id="result-grade" class="text-gray-500 mb-6"></p>
        <p id="result-message" class="text-gray-600 mb-8 max-w-md mx-auto"></p>
        <div class="flex flex-col sm:flex-row gap-3 justify-center">
          <button onclick="resetQuiz()" class="btn btn--primary">
            Rejouer
          </button>
          <button onclick="document.getElementById('quiz-selection').scrollIntoView({behavior: 'smooth'})" class="btn btn--secondary">
            Choisir un autre th√®me
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .section { padding: 2.5rem 0; border-top: 1px solid rgba(0,0,0,0.06); }
  @media (min-width: 768px) { .section { padding: 3rem 0; } }
  
  .container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }
  
  .section-header {
    margin-bottom: 3rem;
  }
  
  .section-header__label {
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: #C41E3A;
    margin-bottom: 0.5rem;
    display: block;
  }
  
  .section-header__title {
    font-size: clamp(1.75rem, 4vw, 2.5rem);
    font-weight: 700;
    color: #111827;
    line-height: 1.2;
    margin-bottom: 1rem;
  }
  
  .section-header__intro {
    font-size: 1.125rem;
    color: #4B5563;
    line-height: 1.6;
    max-width: 600px;
  }
  
  .card {
    background-color: white;
    border: 1px solid #E5E7EB;
    border-radius: 12px;
    padding: 1.5rem;
    transition: all 0.2s ease;
  }
  
  .card:hover {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.08), 0 4px 6px -2px rgba(0, 0, 0, 0.03);
    border-color: #D1D5DB;
    transform: translateY(-2px);
  }
  
  .card--feature {
    padding: 2rem;
  }
  
  .badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 600;
    border-radius: 9999px;
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  .badge--red {
    background-color: rgba(196, 30, 58, 0.1);
    color: #C41E3A;
  }
  
  .badge--metal {
    background-color: #F3F4F6;
    color: #6B7280;
  }
  
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    font-size: 0.9375rem;
    font-weight: 600;
    border-radius: 8px;
    transition: all 0.2s ease;
    cursor: pointer;
    border: none;
  }
  
  .btn:focus-visible {
    outline: 2px solid #C41E3A;
    outline-offset: 2px;
  }
  
  .btn--primary {
    background-color: #C41E3A;
    color: white;
    font-weight: 700;
    box-shadow: 0 4px 14px rgba(196, 30, 58, 0.35);
  }
  
  .btn--primary:hover {
    background-color: #A01830;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(196, 30, 58, 0.45);
  }
  
  .btn--secondary {
    background-color: transparent;
    color: #111827;
    border: 1.5px solid #D1D5DB;
    font-weight: 700;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  }
  
  .btn--secondary:hover {
    border-color: #C41E3A;
    color: #C41E3A;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }
</style>

<script is:inline>
  // Quiz data
  const quizMotoVsAuto = [
    { question: "Quelle est la distance de freinage approximative d'une moto √† 50 km/h sur route s√®che ?", answers: ["8-10 m√®tres", "12-15 m√®tres", "18-22 m√®tres", "25-30 m√®tres"], correct: 1, explanation: "Une moto freine g√©n√©ralement en 12-15 m√®tres √† 50 km/h, comparable √† une voiture moderne mais avec moins de stabilit√©." },
    { question: "Sur route mouill√©e, la distance de freinage d'une moto est multipli√©e par :", answers: ["1,5", "2", "2,5 √† 3", "4"], correct: 2, explanation: "Sur route mouill√©e, la distance de freinage peut √™tre multipli√©e par 2,5 √† 3 en raison de la r√©duction d'adh√©rence des deux roues." },
    { question: "Le champ de vision d'un motard est environ :", answers: ["90¬∞ (comme une voiture)", "120¬∞", "180¬∞ (vision panoramique)", "360¬∞ avec les r√©tros"], correct: 2, explanation: "Sans car√©nage, un motard dispose d'environ 180¬∞ de champ visuel, bien sup√©rieur √† celui d'un automobiliste." },
    { question: "Dans un virage, une moto doit :", answers: ["Ralentir avant d'entrer, maintenir sa vitesse", "Freiner en courbe si n√©cessaire", "Acc√©l√©rer pour stabiliser", "Rester au milieu de la chauss√©e"], correct: 0, explanation: "La r√®gle d'or : ralentir AVANT le virage, maintenir une vitesse constante dans le virage, et r√©acc√©l√©rer √† la sortie." },
    { question: "L'angle mort d'un motard compar√© √† une voiture est :", answers: ["Identique", "Plus grand", "Plus petit (pas d'angle mort)", "Inexistant gr√¢ce aux r√©tros"], correct: 2, explanation: "Le motard n'a pratiquement pas d'angle mort gr√¢ce √† sa position √©lev√©e et sa capacit√© √† tourner la t√™te." },
    { question: "En cas d'aquaplaning sur moto :", answers: ["Freiner fort pour stabiliser", "Maintenir l'acc√©l√©rateur constant, ne pas freiner", "Acc√©l√©rer pour traverser", "Se coucher sur le r√©servoir"], correct: 1, explanation: "Il faut maintenir l'acc√©l√©rateur constant sans freiner ni tourner brutalement, et laisser la moto se stabiliser seule." },
    { question: "La distance de s√©curit√© recommand√©e entre deux motos est :", answers: ["1 seconde", "2 secondes (r√®gle des 2 secondes)", "3 secondes", "5 secondes"], correct: 1, explanation: "La r√®gle des 2 secondes s'applique aussi aux motos, mais beaucoup de motards pr√©f√®rent 3 secondes pour plus de marge." },
    { question: "Un motard doit-il traverser sur les passages clout√©s ?", answers: ["Oui, comme les pi√©tons", "Non, il doit rester sur la chauss√©e", "Oui, mais √† pied en poussant la moto", "Seulement si le feu est rouge"], correct: 2, explanation: "Un motard doit descendre de sa moto et la pousser pour traverser sur un passage pi√©ton, comme un pi√©ton." },
    { question: "Le 'traversier' (traverser les files) est autoris√© :", answers: ["Toujours", "Jamais", "Uniquement en circulation dense < 50 km/h (inter-files)", "Seulement sur autoroute"], correct: 2, explanation: "L'inter-files est th√©oriquement interdit mais tol√©r√© en France en circulation dense < 50 km/h, sous certaines conditions." },
    { question: "Quelle est la principale cause d'accident mortel en moto ?", answers: ["Vitesse excessive", "Non-respect de la priorit√© par l'autre usager", "Alcool", "M√©t√©o"], correct: 1, explanation: "Le non-respect de la priorit√© par un autre usager (surtout en intersection) est la principale cause d'accident mortel moto." },
    { question: "Le 't√™te-√†-queue' en moto est g√©n√©ralement caus√© par :", answers: ["Un freinage trop tardif", "Une acc√©l√©ration brutale en courbe", "Un changement de rapport inadapt√©", "Un pneu sous-gonfl√©"], correct: 1, explanation: "L'acc√©l√©ration brutale en courbe peut faire patiner la roue arri√®re et provoquer un d√©rapage (t√™te-√†-queue)." },
    { question: "Un motard doit positionner sa moto au feu rouge :", answers: ["Au milieu de la voie", "Sur le c√¥t√© gauche de la voie", "Sur le c√¥t√© droit de la voie (devant le filet)", "N'importe o√π, c'est pareil"], correct: 2, explanation: "Le motard doit se placer √† droite de sa voie (pour √™tre visible dans le r√©tro de la voiture devant) tout en restant visible." },
    { question: "La conduite pr√©ventive en moto implique :", answers: ["Rouler vite pour ne pas g√™ner", "Anticiper les dangers et pr√©voir une √©chappatoire", "Siffler les voitures qui doublent", "Rouler toujours avec les warnings"], correct: 1, explanation: "La conduite pr√©ventive consiste √† anticiper les dangers (sortie de voiture, gravier...) et toujours avoir un 'plan B'." },
    { question: "En duo (passager), la moto voit sa distance de freinage :", answers: ["Diminuer (plus de poids = plus d'adh√©rence)", "Augmenter de 20-30%", "Rester identique", "√ätre divis√©e par 2"], correct: 1, explanation: "Avec un passager, le poids suppl√©mentaire allonge la distance de freinage d'environ 20-30%." },
    { question: "Le 'blocage de direction' (Death Wobble) peut √™tre provoqu√© par :", answers: ["Un guidon l√¢che", "Une vitesse excessive", "Un d√©faut d'√©quilibrage des roues", "Toutes ces r√©ponses"], correct: 3, explanation: "Le wobble peut √™tre caus√© par un guidon l√¢che, une vitesse trop √©lev√©e, un d√©faut d'√©quilibrage ou un pneus us√©." }
  ];

  const quizRacing = [
    { question: "Qui d√©tient le record du plus grand nombre de titres en MotoGP ?", answers: ["Valentino Rossi", "Giacomo Agostini", "Marc Marquez", "Mick Doohan"], correct: 1, explanation: "Giacomo Agostini d√©tient le record avec 15 titres mondiaux (8 en 500cc, 7 en 350cc) entre 1966 et 1975." },
    { question: "Le Tourist Trophy de l'√Æle de Man se court sur un circuit de :", answers: ["3,5 km", "10 km", "37,7 miles (60,7 km)", "100 km"], correct: 2, explanation: "Le Snaefell Mountain Course fait 37,73 miles (60,72 km), c'est le circuit le plus long et dangereux du monde." },
    { question: "En quelle ann√©e Valentino Rossi a-t-il remport√© son premier titre en 500cc ?", answers: ["1997", "1999", "2001", "2004"], correct: 2, explanation: "Valentino Rossi a remport√© son premier titre en 500cc en 2001 avec Honda, avant de passer en MotoGP." },
    { question: "Le 'Doctor' est le surnom de :", answers: ["Jorge Lorenzo", "Casey Stoner", "Valentino Rossi", "Dani Pedrosa"], correct: 2, explanation: "Valentino Rossi est surnomm√© 'The Doctor' depuis ses d√©buts, en r√©f√©rence √† son style de pilotage 'clinique'." },
    { question: "Quel constructeur a remport√© le plus de constructeurs en MotoGP/500cc ?", answers: ["Yamaha", "Honda", "Ducati", "Suzuki"], correct: 1, explanation: "Honda domine l'histoire avec plus de 20 titres constructeurs en cat√©gorie reine." },
    { question: "Le 'King of the Mountain' Joey Dunlop a remport√© combien de TT ?", answers: ["13", "18", "26", "32"], correct: 2, explanation: "Joey Dunlop d√©tient le record absolu avec 26 victoires au Tourist Trophy de l'√Æle de Man." },
    { question: "En quelle ann√©e la cat√©gorie 500cc est-elle devenue MotoGP ?", answers: ["1998", "2002", "2005", "2010"], correct: 1, explanation: "La cat√©gorie 500cc a √©t√© remplac√©e par le MotoGP en 2002, avec l'introduction des 4-temps 990cc." },
    { question: "Qui est le pilote fran√ßais le plus titr√© en Grand Prix ?", answers: ["Christian Sarron", "Jean-Philippe Ruggia", "Loris Baz", "Fabio Quartararo"], correct: 0, explanation: "Christian Sarron est le pilote fran√ßais le plus titr√© avec 6 victoires en 250cc dans les ann√©es 80." },
    { question: "Le 'Corkscrew' est une c√©l√®bre s√©quence de virages situ√©e √† :", answers: ["Silverstone", "Le Mans", "Laguna Seca", "Phillip Island"], correct: 2, explanation: "Le Corkscrew (Tire-bouchon) est une c√©l√®bre descente de 8 √©tages au WeatherTech Raceway Laguna Seca." },
    { question: "Quel pilote a remport√© 5 titres cons√©cutifs en 500cc/MotoGP ?", answers: ["Valentino Rossi", "Marc Marquez", "Mick Doohan", "Michael Schumacher"], correct: 2, explanation: "Mick Doohan a domin√© la cat√©gorie reine de 1994 √† 1998 avec 5 titres cons√©cutifs chez Honda." },
    { question: "Le Circuit de Phillip Island est situ√© en :", answers: ["Nouvelle-Z√©lande", "Australie", "Afrique du Sud", "Argentine"], correct: 1, explanation: "Phillip Island est situ√© au sud de Melbourne, en Australie, et est r√©put√© pour ses vues spectaculaires." },
    { question: "En 2020, Fabio Quartararo est devenu le premier Champion du Monde fran√ßais en :", answers: ["Moto2", "Moto3", "MotoGP", "Superbike"], correct: 2, explanation: "Fabio Quartararo est devenu en 2021 le premier Champion du Monde fran√ßais de l'histoire en MotoGP." },
    { question: "Le 'Elbow Down' (coude √† terre) a √©t√© popularis√© par :", answers: ["Kenny Roberts", "Wayne Rainey", "Valentino Rossi", "Marc Marquez"], correct: 3, explanation: "Marc Marquez a popularis√© le coude √† terre dans les ann√©es 2010, bien que le technique existe depuis les 80s." },
    { question: "La vitesse maximale atteinte au TT de l'√Æle de Man est d'environ :", answers: ["280 km/h", "320 km/h", "340 km/h", "380 km/h"], correct: 2, explanation: "Peter Hickman a √©tabli le record absolu √† 340,5 km/h en 2023 avec sa BMW M 1000 RR." },
    { question: "Quelle course est surnomm√©e 'The Greatest Show on Earth' ?", answers: ["Le Mans 24h Moto", "Daytona 200", "Isle of Man TT", "Suzuka 8 Hours"], correct: 2, explanation: "Le Tourist Trophy de l'√Æle de Man est souvent appel√© 'The Greatest Show on Earth' par sa dangerosit√© l√©gendaire." }
  ];

  let currentQuiz = [], currentQuestionIndex = 0, score = 0, selectedAnswer = null;

  function startQuiz(quizType) {
    currentQuiz = quizType === 'motoVsAuto' ? [...quizMotoVsAuto] : [...quizRacing];
    currentQuiz.sort(() => Math.random() - 0.5);
    currentQuestionIndex = 0; score = 0; selectedAnswer = null;
    document.getElementById('quiz-selection').classList.add('hidden');
    document.getElementById('quiz-container').classList.remove('hidden');
    document.getElementById('results-container').classList.add('hidden');
    showQuestion();
  }

  function showQuestion() {
    const question = currentQuiz[currentQuestionIndex];
    selectedAnswer = null;
    document.getElementById('current-question').textContent = currentQuestionIndex + 1;
    document.getElementById('current-score').textContent = `Score: ${score}`;
    document.getElementById('progress-bar').style.width = `${((currentQuestionIndex + 1) / 15) * 100}%`;
    document.getElementById('question-text').textContent = question.question;
    document.getElementById('answers-container').innerHTML = question.answers.map((answer, index) => `
      <button onclick="selectAnswer(${index})" id="answer-${index}" class="w-full p-4 bg-gray-50 hover:bg-gray-100 rounded-lg border border-gray-200 text-left transition-all answer-btn">
        <span class="inline-block w-8 h-8 bg-white border border-gray-300 rounded-full text-center leading-8 mr-3 text-sm font-semibold text-gray-700">${String.fromCharCode(65 + index)}</span>
        <span class="text-gray-900">${answer}</span>
      </button>
    `).join('');
    document.getElementById('feedback-container').classList.add('hidden');
    document.getElementById('next-btn').classList.add('hidden');
  }

  function selectAnswer(index) {
    if (selectedAnswer !== null) return;
    selectedAnswer = index;
    const question = currentQuiz[currentQuestionIndex];
    const isCorrect = index === question.correct;
    document.querySelectorAll('.answer-btn').forEach((btn, i) => {
      btn.disabled = true; btn.classList.add('opacity-70');
      const letterSpan = btn.querySelector('span:first-child');
      if (i === question.correct) { 
        btn.classList.remove('bg-gray-50', 'border-gray-200'); 
        btn.classList.add('bg-green-50', 'border-green-500');
        letterSpan.classList.add('bg-green-500', 'text-white', 'border-green-500');
        letterSpan.classList.remove('bg-white', 'text-gray-700', 'border-gray-300');
      }
      else if (i === index && !isCorrect) { 
        btn.classList.remove('bg-gray-50', 'border-gray-200'); 
        btn.classList.add('bg-red-50', 'border-red-500');
        letterSpan.classList.add('bg-red-500', 'text-white', 'border-red-500');
        letterSpan.classList.remove('bg-white', 'text-gray-700', 'border-gray-300');
      }
    });
    if (isCorrect) score++;
    document.getElementById('current-score').textContent = `Score: ${score}`;
    const feedbackBox = document.getElementById('feedback-box'), feedbackIcon = document.getElementById('feedback-icon'), feedbackTitle = document.getElementById('feedback-title'), feedbackText = document.getElementById('feedback-text');
    if (isCorrect) {
      feedbackBox.className = 'rounded-lg p-4 bg-green-50 border border-green-200';
      feedbackIcon.className = 'flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center bg-green-500 text-white text-sm font-bold'; feedbackIcon.innerHTML = '‚úì';
      feedbackTitle.className = 'font-semibold text-green-800'; feedbackTitle.textContent = 'Bonne r√©ponse !';
    } else {
      feedbackBox.className = 'rounded-lg p-4 bg-red-50 border border-red-200';
      feedbackIcon.className = 'flex-shrink-0 w-6 h-6 rounded-full flex items-center justify-center bg-red-500 text-white text-sm font-bold'; feedbackIcon.innerHTML = '‚úï';
      feedbackTitle.className = 'font-semibold text-red-800'; feedbackTitle.textContent = 'Mauvaise r√©ponse';
    }
    feedbackText.className = 'text-gray-600 text-sm mt-1'; feedbackText.textContent = question.explanation;
    document.getElementById('feedback-container').classList.remove('hidden');
    const nextBtn = document.getElementById('next-btn');
    nextBtn.textContent = currentQuestionIndex < 14 ? 'Suivant' : 'Voir les r√©sultats';
    nextBtn.classList.remove('hidden');
  }

  function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < 15) showQuestion(); else showResults();
  }

  function showResults() {
    document.getElementById('quiz-container').classList.add('hidden');
    document.getElementById('results-container').classList.remove('hidden');
    const resultIcon = document.getElementById('result-icon'), resultTitle = document.getElementById('result-title'), resultScore = document.getElementById('result-score'), resultGrade = document.getElementById('result-grade'), resultMessage = document.getElementById('result-message');
    resultScore.textContent = `${score}/15`;
    let grade, message, icon, bgClass;
    if (score === 15) { grade = "King of the Road"; message = "Perfection absolue ! Vous √™tes une l√©gende vivante de la moto."; icon = "üëë"; bgClass = "bg-yellow-100"; }
    else if (score >= 13) { grade = "Ma√Ætre des Deux Roues"; message = "Excellent ! Vous connaissez votre sujet sur le bout des doigts."; icon = "üèÜ"; bgClass = "bg-yellow-50"; }
    else if (score >= 10) { grade = "Expert Motard"; message = "Tr√®s bon score ! Vous avez une solide culture moto."; icon = "üèÖ"; bgClass = "bg-gray-100"; }
    else if (score >= 7) { grade = "Conducteur Averti"; message = "Pas mal ! Mais il reste encore des choses √† apprendre."; icon = "üéØ"; bgClass = "bg-orange-50"; }
    else if (score >= 4) { grade = "D√©butant"; message = "Il faut rouler plus pour accumuler l'exp√©rience !"; icon = "üìñ"; bgClass = "bg-gray-100"; }
    else { grade = "Pi√©ton"; message = "Peut-√™tre devriez-vous commencer par un scooter ?"; icon = "üö∂"; bgClass = "bg-red-50"; }
    resultIcon.className = `w-20 h-20 mx-auto mb-4 rounded-full flex items-center justify-center text-4xl ${bgClass}`;
    resultIcon.textContent = icon; resultTitle.textContent = grade; resultGrade.textContent = grade; resultMessage.textContent = message;
  }

  function resetQuiz() {
    document.getElementById('quiz-selection').classList.remove('hidden');
    document.getElementById('quiz-container').classList.add('hidden');
    document.getElementById('results-container').classList.add('hidden');
    currentQuiz = []; currentQuestionIndex = 0; score = 0; selectedAnswer = null;
  }
</script>